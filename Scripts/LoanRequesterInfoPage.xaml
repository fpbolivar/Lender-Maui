<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:views="clr-namespace:Lender.Views"
             xmlns:converters="clr-namespace:Lender.Converters"
             x:Class="Lender.LoanRequesterInfoPage"
             Title="Requester Information"
             BackgroundColor="#0A1929"
             Padding="0"
             SafeAreaEdges="None">
    <ContentPage.Resources>
        <ResourceDictionary>
            <ResourceDictionary Source="Resources/Styles/Colors.xaml" />
            <converters:BoolToColorConverter x:Key="BoolToColorConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
    <Grid RowDefinitions="*,Auto" BackgroundColor="#0A1929">
        <!-- Main Content -->
        <ScrollView Grid.Row="0" Padding="16">
            <VerticalStackLayout Spacing="16">
                <!-- Header -->
                <HorizontalStackLayout Spacing="10" Padding="0,10,0,0">
                    <Button Text="&lt;"
                            Command="{Binding BackCommand}"
                            BackgroundColor="Transparent"
                            TextColor="#FF9F43"
                            FontSize="28"
                            WidthRequest="44"
                            HeightRequest="44"
                            CornerRadius="22"
                            Padding="0" />
                    <Label Text="Requester Information"
                           FontSize="24"
                           FontAttributes="Bold"
                           TextColor="White"
                           VerticalTextAlignment="Center" />
                </HorizontalStackLayout>

                <!-- Information Form -->
                <Frame CornerRadius="12" BackgroundColor="#132F4C" Padding="16" HasShadow="False">
                    <Grid RowDefinitions="Auto,*" ColumnDefinitions="*,Auto">
                        <!-- Debug-only autofill button -->
                        <Button Grid.Row="0" Grid.Column="1"
                                Text="$"
                                IsVisible="{Binding IsDebugMode}"
                                Command="{Binding AutoFillRequesterDemoCommand}"
                                BackgroundColor="#0A1929"
                                TextColor="#FF9F43"
                                FontAttributes="Bold"
                                WidthRequest="32"
                                HeightRequest="32"
                                CornerRadius="16"
                                Padding="0" />

                        <VerticalStackLayout Grid.Row="1" Grid.ColumnSpan="2" Spacing="16">
                        <!-- Full Name -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Full Name" TextColor="White" />
                            <Frame Padding="10,6" BackgroundColor="#0A1929" CornerRadius="10" HasShadow="False">
                                <Entry Text="{Binding RequesterName}" Placeholder="Enter full name" TextColor="White" BackgroundColor="Transparent" />
                            </Frame>
                        </VerticalStackLayout>

                        <!-- Phone Number -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Phone Number" TextColor="White" />
                            <Frame Padding="10,6" BackgroundColor="#0A1929" CornerRadius="10" HasShadow="False">
                                <Entry Text="{Binding RequesterPhone}" Keyboard="Telephone" Placeholder="Enter phone number" TextColor="White" BackgroundColor="Transparent" />
                            </Frame>
                        </VerticalStackLayout>

                        <!-- Email -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Email" TextColor="White" />
                            <Frame Padding="10,6" BackgroundColor="#0A1929" CornerRadius="10" HasShadow="False">
                                <Entry Text="{Binding RequesterEmail}" Keyboard="Email" Placeholder="Enter email address" TextColor="White" BackgroundColor="Transparent" />
                            </Frame>
                        </VerticalStackLayout>

                        <!-- Address -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Address (Optional)" TextColor="White" />
                            <Frame Padding="10,6" BackgroundColor="#0A1929" CornerRadius="10" HasShadow="False">
                                <Entry Text="{Binding RequesterAddress}" Placeholder="Enter address" TextColor="White" BackgroundColor="Transparent" />
                            </Frame>
                        </VerticalStackLayout>

                        <!-- City -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="City (Optional)" TextColor="White" />
                            <Frame Padding="10,6" BackgroundColor="#0A1929" CornerRadius="10" HasShadow="False">
                                <Entry Text="{Binding RequesterCity}" Placeholder="Enter city" TextColor="White" BackgroundColor="Transparent" />
                            </Frame>
                        </VerticalStackLayout>

                        <!-- State / Province -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="State / Province (Optional)" TextColor="White" />
                            <Frame Padding="10,6" BackgroundColor="#0A1929" CornerRadius="10" HasShadow="False">
                                <Entry Text="{Binding RequesterState}" Placeholder="Enter state/province" TextColor="White" BackgroundColor="Transparent" />
                            </Frame>
                        </VerticalStackLayout>

                        <!-- ZIP / Postal Code -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="ZIP / Postal Code (Optional)" TextColor="White" />
                            <Frame Padding="10,6" BackgroundColor="#0A1929" CornerRadius="10" HasShadow="False">
                                <Entry Text="{Binding RequesterZipCode}" Placeholder="Enter ZIP/postal code" TextColor="White" BackgroundColor="Transparent" />
                            </Frame>
                        </VerticalStackLayout>

                        <!-- ID Number / SSN (Optional) -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="ID Number / SSN (Optional)" TextColor="White" />
                            <Frame Padding="10,6" BackgroundColor="#0A1929" CornerRadius="10" HasShadow="False">
                                <Entry Text="{Binding RequesterIdNumber}" Placeholder="Enter ID number" TextColor="White" BackgroundColor="Transparent" />
                            </Frame>
                        </VerticalStackLayout>
                        </VerticalStackLayout>
                    </Grid>
                </Frame>

                <!-- Notification Type -->
                <Frame CornerRadius="12" BackgroundColor="#132F4C" Padding="16" HasShadow="False">
                    <VerticalStackLayout Spacing="16">
                        <Label Text="Notification Type" TextColor="White" FontSize="16" FontAttributes="Bold" />
                        
                        <HorizontalStackLayout Spacing="8">
                            <Button Text="None" 
                                    Command="{Binding SetNotificationTypeCommand}" 
                                    CommandParameter="None"
                                    TextColor="White" 
                                    CornerRadius="12" Padding="14,8"
                                    FontSize="13"
                                    BackgroundColor="{Binding IsNoNotificationSelected, Converter={StaticResource BoolToColorConverter}}" />
                            <Button Text="SMS" 
                                    Command="{Binding SetNotificationTypeCommand}" 
                                    CommandParameter="SMS"
                                    TextColor="White" 
                                    CornerRadius="12" Padding="14,8"
                                    FontSize="13"
                                    BackgroundColor="{Binding IsSMSNotificationSelected, Converter={StaticResource BoolToColorConverter}}" />
                            <Button Text="Email" 
                                    Command="{Binding SetNotificationTypeCommand}" 
                                    CommandParameter="Email"
                                    TextColor="White" 
                                    CornerRadius="12" Padding="14,8"
                                    FontSize="13"
                                    BackgroundColor="{Binding IsEmailNotificationSelected, Converter={StaticResource BoolToColorConverter}}" />
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </Frame>

                <!-- Continue Button -->
                <Button Text="Continue" 
                        Command="{Binding ContinueToFinalSummaryCommand}"
                        BackgroundColor="#1ABC9C"
                        TextColor="White"
                        FontAttributes="Bold"
                        CornerRadius="12" 
                        Padding="16,12"
                        Margin="0,16,0,16" />
            </VerticalStackLayout>
        </ScrollView>

        <!-- Bottom Navigation -->
        <views:BottomNavView Grid.Row="1" SelectedTab="Loans" />
    </Grid>
</ContentPage>
